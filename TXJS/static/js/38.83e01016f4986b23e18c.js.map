{"version":3,"sources":["webpack:///./src/common/js/getLocation.js","webpack:///src/views/organization.vue","webpack:///./src/views/organization.vue?1f09","webpack:///./src/views/organization.vue"],"names":["url","location","href","split","organization","name","mixins","data","center","lists","methods","getLocation","that","this","$http","get","params","APIs","then","r","weixin_js_sdk_default","a","config","info","error","res","alert","errMsg","ready","checkJsApi","jsApiList","success","type","longitude","latitude","distance","status","mechanisms","forEach","v","marker","position","events","click","showMess","push","created","self","org","cover","tel","address","business","id","mess","icon","lng","lat","loaded","plugin","enableHighAccuracy","timeout","maximumAge","convert","showButton","buttonPosition","showMarker","showCircle","panToLocation","zoomToAccuracy","extensions","pName","init","o","getCurrentPosition","result","$nextTick","complete","getMechanisms","message","item","telephone","bunisness","_this","views_organization","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","value","expression","attrs","tag","to","path","_v","_s","_l","index","key","vid","zoom","offset","visible","draggable","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/38.83e01016f4986b23e18c.js","sourcesContent":["import wx from 'weixin-js-sdk'\n\nlet url = location.href.split('#')[0];\nexport const getLocation = {\n  data(){\n    return{\n      center:[],\n      lists:[]\n    }\n  },\n  methods: {\n    getLocation() {\n      let that=this;\n      this.$http.get('/third/jssdk/get-sign-package', {\n        params: {\n          url: url,\n          APIs: ['checkJsApi', 'getLocation']\n        }\n      }).then(r => {\n        wx.config(r.data.info)\n      });\n      wx.error(function (res) {\n        alert(\"出错了：\" + res.errMsg);\n      });\n      wx.ready(function () {\n        wx.checkJsApi({\n          jsApiList: ['getLocation'],\n          success: function (res) {\n          }\n        });\n        wx.getLocation({\n          type: 'gcj02',\n          success: function (res) {\n            // alert([res.longitude, res.latitude])\n            that.center=[res.longitude, res.latitude];\n            that.$http.get('/mechanism',\n              {params:\n                  {\n                    distance:5000,\n                    latitude:res.latitude,\n                    longitude:res.longitude\n                  }\n              }).then(r=>{\n                  if(r.status=='success'){\n                    that.lists = [];\n                    r.data.mechanisms.forEach((v) => {\n                      let marker = {};\n                      marker.position = [v.longitude, v.latitude];\n                      marker.events = {\n                        click() {\n                          that.showMess(v)\n                        }\n                      };\n                      that.lists.push(marker)\n                    });\n                  }\n            })\n          }\n        });\n      });\n    }\n  },\n  created(){\n    this.getLocation();\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/js/getLocation.js","<template>\n  <main class=\"organization\">\n    <router-link tag=\"div\" class=\"mess\" v-show=\"mess\" :to=\"{path:`/organization/detail/${org.id}`}\">\n      <div class=\"img\">\n        <img v-lazy=\"org.cover\">\n      </div>\n      <div class=\"text\">\n        <h3>{{org.name}}</h3>\n        <h5><i class=\"icon-tabbar_icon_tel_selected\"></i>{{org.tel}}</h5>\n        <h5><i class=\"icon-tabbar_icon_address_selected\"></i>{{org.address}}</h5>\n        <p><span v-for=\"(item,index) in org.business\" :key=\"index\">{{item}}</span></p>\n      </div>\n    </router-link>\n    <el-amap vid=\"amap\" :center=\"center\" v-if=\"center.length\" :zoom=\"18\" :events=\"events\">\n      <el-amap-marker :position=\"center\"></el-amap-marker>\n      <el-amap-marker v-for=\"(item,index) in lists\"\n                      :key=\"index\"\n                      :position=\"item.position\"\n                      :offset=\"[-29,-72]\"\n                      :events=\"item.events\"\n                      :visible=\"true\"\n                      :draggable=\"false\"\n                      :icon=\"icon\">\n      </el-amap-marker>\n    </el-amap>\n  </main>\n\n</template>\n\n<script>\n  import {getLocation} from \"../common/js/getLocation\";\n\n  export default {\n    name: \"organization\",\n    mixins: [getLocation],\n    data() {\n      const self = this;\n      return {\n        // lists: [],\n        org: {\n          name: '',\n          cover: '',\n          tel: '',\n          address: '',\n          business: [],\n          id: ''\n        },\n        mess: false,\n        icon: '//t-oss01.mion.cn/uploads/0b1e08d6a0fd14085c8ac45ecc11c3bd.png',\n        center: [113.3245904, 23.1066805],\n        lng: 0,\n        lat: 0,\n        loaded: false,\n        plugin: [{\n          enableHighAccuracy: true,//是否使用高精度定位，默认:true\n          timeout: 100,          //超过10秒后停止定位，默认：无穷大\n          maximumAge: 0,           //定位结果缓存0毫秒，默认：0\n          convert: true,           //自动偏移坐标，偏移后的坐标为高德坐标，默认：true\n          showButton: true,        //显示定位按钮，默认：true\n          buttonPosition: 'RB',    //定位按钮停靠位置，默认：'LB'，左下角\n          showMarker: true,        //定位成功后在定位到的位置显示点标记，默认：true\n          showCircle: true,        //定位成功后用圆圈表示定位精度范围，默认：true\n          panToLocation: true,     //定位成功后将定位到的位置作为地图中心点，默认：true\n          zoomToAccuracy: true,//定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：f\n          extensions: 'all',\n          pName: 'Geolocation',\n          events: {\n            init(o) {\n              // o 是高德地图定位插件实例\n              o.getCurrentPosition((status, result) => {\n                // console.log(result)\n                if (result && result.position) {\n                  self.lng = result.position.lng;\n                  self.lat = result.position.lat;\n                  self.center = [self.lng, self.lat];\n                  self.loaded = true;\n                  self.$nextTick();\n                }\n              });\n            },\n            complete(data) {\n              self.getMechanisms(data.position.lng, data.position.lat)\n            },\n            error(data) {\n              alert(data.message)\n            }\n          }\n        }],\n        events: {\n          click() {\n            self.mess = false;\n          },\n        }\n      }\n    },\n    methods: {\n      showMess(item) {\n        this.mess = true;\n        this.org.id = item.id;\n        this.org.cover = item.cover;\n        this.org.tel = item.telephone;\n        this.org.address = item.address;\n        this.org.name = item.name;\n        this.org.business = item.bunisness;\n      },\n      getMechanisms(lng, lat) {\n        // alert(lng)\n        this.$http.get('/mechanism',\n          {\n            params:\n              {\n                distance: 5000,\n                latitude: lat,\n                longitude: lng,\n              }\n          }).then(r => {\n          if (r.status === 'success') {\n            this.lists = [];\n            let self = this;\n            r.data.mechanisms.forEach((v) => {\n              let marker = {};\n              marker.position = [v.longitude, v.latitude];\n              marker.events = {\n                click() {\n                  self.showMess(v)\n                }\n              };\n              this.lists.push(marker)\n            });\n            // alert(this.lists.length)\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  @import \"common/scss/const.scss\";\n  @import \"common/scss/mymixin.scss\";\n\n  .organization {\n    position: fixed;\n    z-index: 3;\n    width: 100%;\n    top: 0;\n    bottom: 98px;\n  }\n\n  .mess {\n    position: absolute;\n    top: 20px;\n    left: 50%;\n    background: #fff;\n    border-radius: 10px;\n    z-index: 1;\n    transform: translateX(-50%);\n    width: 700px;\n    height: 246px;\n    padding: 30px;\n    box-sizing: border-box;\n    @extend %between;\n    align-items: stretch;\n    box-shadow: 10px 0px 30px rgba(58, 53, 53, 0.2);\n    .img {\n      margin-right: 20px;\n      width: 164px;\n      height: 186px;\n      flex: none;\n    }\n    .text {\n      width: 456px;\n      @extend %between;\n      align-items: flex-start;\n      flex-direction: column;\n      text-align: left;\n      h3 {\n        width: 100%;\n        font-size: 32px;\n        color: #333;\n        @include no-wrap;\n      }\n      h5 {\n        width: 100%;\n        @include no-wrap;\n      }\n      h5 i {\n        margin-right: 12px;\n      }\n      p span {\n        display: inline-block;\n        margin-right: 8px;\n        padding: 0 14px;\n        line-height: 40px;\n        font-size: 24px;\n        color: #fff;\n        background: #65d0ab;\n        border-radius: 5px;\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/organization.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"organization\"},[_c('router-link',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mess),expression:\"mess\"}],staticClass:\"mess\",attrs:{\"tag\":\"div\",\"to\":{path:(\"/organization/detail/\" + (_vm.org.id))}}},[_c('div',{staticClass:\"img\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.org.cover),expression:\"org.cover\"}]})]),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[_c('h3',[_vm._v(_vm._s(_vm.org.name))]),_vm._v(\" \"),_c('h5',[_c('i',{staticClass:\"icon-tabbar_icon_tel_selected\"}),_vm._v(_vm._s(_vm.org.tel))]),_vm._v(\" \"),_c('h5',[_c('i',{staticClass:\"icon-tabbar_icon_address_selected\"}),_vm._v(_vm._s(_vm.org.address))]),_vm._v(\" \"),_c('p',_vm._l((_vm.org.business),function(item,index){return _c('span',{key:index},[_vm._v(_vm._s(item))])}))])]),_vm._v(\" \"),(_vm.center.length)?_c('el-amap',{attrs:{\"vid\":\"amap\",\"center\":_vm.center,\"zoom\":18,\"events\":_vm.events}},[_c('el-amap-marker',{attrs:{\"position\":_vm.center}}),_vm._v(\" \"),_vm._l((_vm.lists),function(item,index){return _c('el-amap-marker',{key:index,attrs:{\"position\":item.position,\"offset\":[-29,-72],\"events\":item.events,\"visible\":true,\"draggable\":false,\"icon\":_vm.icon}})})],2):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-07980502\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/organization.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-07980502\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./organization.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./organization.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./organization.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-07980502\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./organization.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-07980502\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/organization.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}